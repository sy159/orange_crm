<!DOCTYPE html>
<html lang="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
    <meta http-equiv="MSThemeCompatible" content="Yes">
    {% include 'Public/public.html' %}
    <style>
        ul.pages{
            display: flex;
            justify-content: center;
            align-items: center;
        }
        ol, ul {
            margin-top: 5px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body style="background:#fff;padding:20px 20px;">
<div style="background:#fefbe4;border:1px solid #f3ecb9;color:#993300;padding:10px;margin-bottom:5px;">
        使用方法：点击对应内容后面的“选中”即可,如果选择商品就先选商店再选商品。
    <a href="/admin/adver_add/">点击这里返回模块选择</a>
</div>
<form method="get"  action="/admin/stores/">
    <input type="text" name="keyword" class="input-text">
    <input type="submit" value="查询" class="button">
</form>
<table class="ListProduct" border="0" cellspacing="0" cellpadding="0" width="100%">
    <thead>
        <tr>
            <th>商店</th>
            <th style=" width:100px;text-align: center">操作</th>
        </tr>
    </thead>
    <tbody id="tbody">
    {% for i in data %}
        <tr>
            <td>{{ i.shop_name }}</td>
            <td style="display: none;">{{ i.shop_id }}</td>
            <td class="norightborder">
                &nbsp;&nbsp;&nbsp;
                <a href="###" class="choose_store">选中</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="" class="choose_goods">商品</a>
            </td>
        </tr>
    {% endfor %}
    </tbody>

</table>
<div class="selectedSort">
    <b>您当前选择的是：</b>
    <i id="selectedSort"></i>
    <button value="" type="button" class="tijiao">确定</button>
    <input type="hidden" value="{{ flag }}" id="flag">
    <input type="hidden" value="{{ parent_id }}" id="parent_id">
    <input type="hidden" value="{{ adver_id }}" id="adver_id">
</div>
<div class="footactions" style="padding-left:10px">
    <div class="pages">
        <ul class="pages">

            <li><a href='/admin/stores/?p=1'>首页</a></li>
            {% if  get_page  == '1' %}
                <li><a href='#'>&lt;上一页</a></li>
            {% else %}
                <li><a href='/admin/stores/?p={{ get_page |add:-1}}'>&lt;上一页</a></li>

            {% endif %}
            {% if  get_page  >=  page_total  %}
                <li><a href='#'>下一页&gt;</a></li>
            {% else %}
                <li><a href='/admin/stores/?p={{ get_page |add:1}}'>下一页&gt;</a></li>
            {% endif %}
            <li><a href='/admin/stores/?p={{ page_total }}'>尾页></a></li>
            <li class='disabled'><a href='##' id='show_info'>{{ get_page }}/{{ page_total }}</a></li>
        </ul>
    </div>
</div>

<script>
     var shopid;
    $("#tbody").on('click','a',function () {
        var clsn=this.className;
        var name=$(this).parent().siblings()[0];
        var shop_id=$(this).parent().siblings()[1];
        shopid=$(shop_id).html();
        var result=$(name).html();
        var flag=$("#flag").val();
        $("#selectedSort").html(result);//给用户看
        if(clsn=='choose_goods'){
            $(this).attr("href","/admin/goods/?adver_id="+$("#adver_id").val()+"&parent_id="+$("#parent_id").val()+"&flag="+flag+"&shop_id="+shopid+"&stores="+result);
        }
    });
    $(".tijiao").click(function () {
        window.parent.showform();
        if($("#flag").val()=='edit'){
            window.parent.add_data("编辑广告信息","/admin/adver_edit/?parent_id="+$("#parent_id").val()+"&adver_id="+$("#adver_id").val());
        }else if($("#flag").val()=='add'){
            window.parent.add_data("添加广告","/admin/adver_add/?parent_id="+$("#parent_id").val());
        }
        window.parent.add_url( $("#selectedSort").html(),"shop_id="+shopid);

    });

</script>
</body>
</html>
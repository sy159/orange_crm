<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<link rel="stylesheet" type="text/css" href="/static/css/style.css"/>
	<link rel="stylesheet" type="text/css" href="/static/css/artdialog/skins/mydialog.css"/>
	<script src="/static/js/jquery.js"></script>
</head>
<body>

<form id="myform" method="post" action="" frame="true" refresh="true">
		<!--<input type="hidden" name="account_id" value=""/>-->
		<table cellpadding="0" cellspacing="0" class="frame_form" width="100%">
			<tr>
				<th width="160">账号</th>
				<td>
					{{ data.account }}
				</td>
			</tr>
			<tr>
				<th width="160">密码</th>
				<td>
					<input type="text" name="pwd" id="pwd" class="input fl" size="25"  validate="maxlength:20,required:true" />
				</td>
			</tr>
			<tr>
				<th width="160">真实姓名</th>
				<td>
					<input type="text" value="{{ data.realname }}" name="realname" id="realname" class="input fl" size="25"  validate="maxlength:20,required:true" />
				</td>
			</tr>
			<tr>
				<th width="160">昵称</th>
				<td>
					<input type="text" value="{{ data.nickname }}" name="nickname" id="nickname" class="input fl" size="25"  validate="maxlength:20,required:true" />
				</td>
			</tr>
			<tr>
				<th width="160">电话</th>
				<td>
					<input type="text" value="{{ data.phone }}" id="phone" class="input fl" name="phone"  size="25"  validate="required:true" tips="多个电话号码以空格分开"/>
				</td>
			</tr>
			<tr>
				<th width="160">EMAIL</th>
				<td>
					<input type="text" value="{{ data.email }}" id="email" class="input fl" name="email"  size="25"  validate="required:true"/>
				</td>
			</tr>
			<tr>
				<th width="160">QQ</th>
				<td>
					<input type="text" value="{{ data.qq }}" id="qq" class="input fl" name="qq" size="25"  validate="required:true"/>
				</td>
			</tr>
			<tr>
                <th width="160">管理员等级</th>
                {% if parent_level == 0 %}
				<td>
					<div class="radio" id="radio">
                        {% if data.level == 0 %}
						<input type="radio" name="level" id="opt1" value="0" checked>平台管理员
						<input type="radio" name="level" id="opt0" value="1">区域总管理员
                            {% else %}
						<input type="radio" name="level" id="opt1" value="0" >平台管理员
						<input type="radio" name="level" id="opt0" value="1" checked>区域总管理员
                            {% endif %}
					</div>
				</td>
                    {% else %}
                    <td>
					<div class="radio" id="radio">
						<input type="radio" name="level" id="opt0" value="2" checked>普通管理员
					</div>
				</td>

                {% endif %}
			</tr>
               <tr id="choose_reg" style="display: none;">
                    <th width="160">所在区域</th>
                    <td id="choose_cityarea" province_id="" city_id="" area_id="" circle_id="-1">
                        <select id="choose_province_hide" name="province_idss">
                            <option id="province">{{ data.province_name }}</option>
                        </select>
                        <select id="choose_city_hide" name="city_idss">
                            <option id="city">{{ data.city_name }}</option>
                        </select>
                        <select id="choose_areass" name="area_id">
                            <option id="area">{{ data.area_name }}</option>
                        </select>
                        <select  id="choose_region" name="region_id">
                            <option id="region">{{ data.region_name }}</option>
                        </select>
                    </td>
                </tr>
			<tr>
				<th width="160">权限分组</th>
				<td>
					<select name="authority_group_id" tips="权限分组">
						<option value="0">不选</option>
					</select>
				</td>
			</tr>
			<tr>
				<td colspan="2" class="aui_footer">
					<div class="aui_buttons" style="">
						<button id="edit" class="aui_state_highlight" type="submit">编辑</button>
						<button id="close" type="button">关闭</button>
					</div>
				</td>
			</tr>
        </table>
	</form>

<script>
     //区域下拉框根据管理员等级显示与隐藏
     var level=parseInt($('input:radio[name="level"]:checked').val());
      if(level == 1){
         $("#choose_reg").css("display","table-row");
        var province="<option selected value=\"0\">全部省</option>",city="<option selected value=\"0\">全部市</option>",area="<option selected value=\"0\">全部区</option>";
        var num,nums,numss;
       $.getJSON("/admin/region_info/",function (data) {
            $.each(data.data[0], function (i, e) {
                province += "<option value=" + "\"" + e.province_id + "\"" + ">" + e.province_name + "</option>";
            });
            $("#choose_province_hide").html(province);
            $("#choose_province_hide").change(function () {
                num = parseInt($("#choose_province_hide option:selected").val());
                city = "<option value=\"0\">请选择市</option>"
                $.each(data.data[1][num], function (i, e) {
                    city += "<option value=" + "\"" + e.city_id + "\"" + ">" + e.city_name + "</option>";
                });
                $("#choose_city_hide").html(city);
            });
            $("#choose_city_hide").change(function () {
                nums = parseInt($("#choose_city_hide option:selected").val());
                area = "<option value=\"0\">请选择区</option>"
                $.each(data.data[2][nums], function (i, e) {
                    area += "<option value=" + "\"" + e.area_id + "\"" + ">" + e.area_name + "</option>";
                });
                $("#choose_areass").html(area);
            });
             $("#choose_areass").change(function () {
                numss = parseInt($("#choose_areass option:selected").val());
                region = "<option>请选择营运区</option>"
                $.each(data.data[3][numss], function (i, e) {
                    region += "<option value=" + "\"" + e.region_id + "\"" + ">" + e.region_name + "</option>";
                });
                $("#choose_region").html(region);
            });
       });
         }else{
             $("#choose_reg").css("display","none");
         }
    /*关闭弹出框*/
    $(".aui_close,#close_authority").click(function (){
        if($("#authorityform").css("display")=="block"){
            $("#authorityform").hide();
        }
    });

     $("#close").click(function () {
		 window.parent.hideform();
     });
     $("#edit").click(function () {
         window.parent.hideform();
         window.parent.tip();
     });

</script>
</body>
</html>